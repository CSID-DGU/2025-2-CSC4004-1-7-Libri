# 요구사항 문서

## 소개

AI 주식 추천 시스템에서 프론트엔드와 백엔드를 연결하여 사용자의 투자 성향에 따라 적절한 AI 모델을 호출하고, 실시간 분석 결과를 표시하는 기능입니다. 투자 성향별로 다른 AI 모델(공격형: a2c, 중간형: marl_4agent, 안정형: marl_3agent)을 사용하여 매수/매도/보유 추천과 상세 분석을 제공합니다.

## 요구사항

### 요구사항 1

**사용자 스토리:** 사용자로서, 선택한 투자 성향에 따라 적절한 AI 모델의 분석 결과를 받고 싶습니다.

#### 승인 기준

1. WHEN 사용자가 투자 성향을 선택하면 THEN 시스템은 해당 성향에 맞는 AI 모델을 매핑해야 합니다
2. WHEN 공격형을 선택하면 THEN 시스템은 a2c 모델을 사용해야 합니다
3. WHEN 중간형을 선택하면 THEN 시스템은 marl_4agent 모델을 사용해야 합니다
4. WHEN 안정형을 선택하면 THEN 시스템은 marl_3agent 모델을 사용해야 합니다

### 요구사항 2

**사용자 스토리:** 사용자로서, StockDetail 화면에서 AI의 매수/매도/보유 추천을 확인하고 싶습니다.

#### 승인 기준

1. WHEN StockDetail 화면이 로드되면 THEN 시스템은 백엔드 API를 호출하여 AI 추천을 가져와야 합니다
2. WHEN API 호출이 성공하면 THEN Frame88의 recommendation에 "매수", "매도", 또는 "보유" 중 하나를 표시해야 합니다
3. WHEN 하루에 한 번(오후 6시) 업데이트된 추천 데이터가 있으면 THEN 시스템은 최신 추천을 표시해야 합니다
4. WHEN API 호출이 실패하면 THEN 시스템은 적절한 오류 메시지를 표시해야 합니다
5. IF 로딩 중이면 THEN 시스템은 로딩 상태를 표시해야 합니다

### 요구사항 3

**사용자 스토리:** 사용자로서, 각 기술 지표에 대한 현재 상황 분석을 백엔드에서 받아 확인하고 싶습니다.

#### 승인 기준

1. WHEN StockDetail 화면이 로드되면 THEN 시스템은 기술 지표 분석 데이터를 백엔드에서 가져와야 합니다
2. WHEN 기술 지표 데이터를 받으면 THEN indicatorData의 description을 백엔드 데이터로 업데이트해야 합니다
3. WHEN 지표별 분석 내용이 있으면 THEN 해당 내용을 텍스트로 표시해야 합니다
4. IF 특정 지표의 데이터가 없으면 THEN 기본 메시지를 표시해야 합니다

### 요구사항 4

**사용자 스토리:** 사용자로서, AI의 종합적인 현황 분석 결과를 Frame49에서 확인하고 싶습니다.

#### 승인 기준

1. WHEN AI 모델 예측 API를 호출하면 THEN 시스템은 GPT 설명(gpt_explanation)을 받아와야 합니다
2. WHEN GPT 설명을 받으면 THEN Frame49의 aiExplanation에 해당 내용을 표시해야 합니다
3. WHEN 설명이 길면 THEN 시스템은 적절히 줄바꿈하여 표시해야 합니다
4. IF GPT 설명이 없으면 THEN 기본 분석 메시지를 표시해야 합니다

### 요구사항 5

**사용자 스토리:** 사용자로서, 네트워크 오류나 서버 오류 시에도 적절한 피드백을 받고 싶습니다.

#### 승인 기준

1. WHEN 네트워크 연결이 실패하면 THEN 시스템은 "네트워크 연결을 확인해주세요" 메시지를 표시해야 합니다
2. WHEN 서버 오류가 발생하면 THEN 시스템은 "서버 오류가 발생했습니다" 메시지를 표시해야 합니다
3. WHEN API 응답이 지연되면 THEN 시스템은 로딩 스피너를 표시해야 합니다
4. IF 오류가 발생하면 THEN 사용자는 재시도할 수 있는 버튼을 제공받아야 합니다

### 요구사항 6

**사용자 스토리:** 사용자로서, 선택한 투자 성향에 따라 해당 AI 모델이 사용하는 기술 지표만 확인하고 싶습니다.

#### 승인 기준

1. WHEN 공격형(a2c) 투자 성향을 선택하면 THEN 시스템은 a2c 모델이 사용하는 기술 지표만 표시해야 합니다
2. WHEN 중간형(marl_4agent) 투자 성향을 선택하면 THEN 시스템은 marl_4agent 모델이 사용하는 기술 지표만 표시해야 합니다
3. WHEN 안정형(marl_3agent) 투자 성향을 선택하면 THEN 시스템은 marl_3agent 모델이 사용하는 기술 지표만 표시해야 합니다
4. WHEN 기술 지표 탭을 클릭하면 THEN 현재 선택된 투자 성향에 맞는 지표 카드들만 표시되어야 합니다

### 요구사항 7

**사용자 스토리:** 개발자로서, 투자 성향과 AI 모델 매핑을 쉽게 수정할 수 있기를 원합니다.

#### 승인 기준

1. WHEN 투자 성향-모델 매핑을 변경하면 THEN 시스템은 새로운 매핑을 즉시 반영해야 합니다
2. WHEN 새로운 AI 모델이 추가되면 THEN 기존 코드 수정 없이 매핑만 변경하여 사용할 수 있어야 합니다
3. WHEN 모델 엔드포인트가 변경되면 THEN 설정 파일만 수정하여 반영할 수 있어야 합니다
4. IF 잘못된 모델 타입이 설정되면 THEN 시스템은 기본 모델로 폴백해야 합니다